---
layout: post
categories: 操作系统和服务
tags: [WSL]
---

有同学在`WSL`中安装`Ubuntu`时，因某些原因略过了一些步骤，没有创建普通账号和密码。那么当他们启动`WSL`进入`Ubuntu`时，默认账号是`root`（其标志是：命令提示符是`#`符号，而普通账户的是`$`），所有的操作均在此账户下进行。
因为`root`账户的权限很高，所以在其下操作有潜在的危险。因此，推荐的做法是常用的操作均在普通账户下进行。
这里，介绍一个创建普通账户的方法。

## 一、 创建普通账户
假设要创建一个名为`bzj`的普通权限登录账号。

1. 创建账号

    在`root`账户下，打开`Linux`终端，发出如下命令：
    ```bash
    useradd -s /bin/bash -m bzj
    ```
    这条命令会创建`bzj`账号，以及与账号同名的组。
    在创建账号的同时，指定了该账号使用的`shell`是`bash`。
    此外，还创建了与此账号关联的`home`目录`/home/bzj`。使用
    ```bash
    cd ~
    ```
    会进入这个目录。

2. 创建密码

    再发出如下命令：
    ```bash
    passwd bzj
    ```
    此命令会为账号`bzj`添加密码。
    请注意在输入密码时，需要输入两次以便验证。


3. 添加账号到`sudo`组

    再发出如下命令：
    ```bash
    usermod -aG sudo
    ```
    此命令会将账号`bzj`添加到`sudo`组（原来的组保持不变），以后就能使用`sudo`命令了。

    >如果要免密使用sudo命令，请参阅我的另一篇博客：免密使用sudo

4. 测试账号
    发出如下命令：
    ```bash
    su - bzj
    ```
    此命令将从当前的`root`账户切换到`bzj`账户，并使用后者的环境。
    接着发出如下命令：
    ```bash
    cd ~
    touch .hushlogin
    ```
    这个文件的存在会阻止登录时系统输出一堆信息。
    此后请发出一些命令（包括`sudo`）测试一下。

## 二、 修改WSL启动时的默认账户

1. 打开一个`Ubuntu`终端，在其中输入如下命令：

    ```bash
    cd /etc
    sudo vim wsl.conf
    ```

2. 当`vim`编辑器启动后，按字母键`i`（此键意为插入insert），然后将如下内容输入：
    ```vim
    [user]
    default=bzj
    ```

3. 输入完成后，先按`ESC`键，再按冒号键`:`，屏幕的底部会出现`:`。在其后输入：`wq`，然后按回车。

---